# LiF: non-SCF computation of groundstate wavefunctions
# (preparatory run for VarPEq electron polaron calculations)

# Gamma-centred k-meshes: 13x13x13
 ngkpt   13 13 13
 nshiftk  1
 shiftk   0.0  0.0  0.0

################################################################################
###                          Common input variables                          ###
################################################################################

# Number of bands
 nband  6  # NOTE: for subsequent VarPEq runs at least one unnocupied band
           # has to be included; here, 5 occupied + 1 unnocupied

# Definition of the planewave basis
 ecut  30

# non-SCF optimization
 iscf   -2
 tolwfr  1e-20
 nstep   100

# Files
 getden_filepath
 "LiF_eph_varpeq/gso_DEN.nc"  # Read the precomputed DEN stored in git submodule
                              # NOTE: for the input parameters used to prodcue
                              # the DEN file, consult the LiF_eph_varpeq/gs.abi

# Pseudopotentials
 pp_dirpath "$ABI_PSPDIR/Psdj_nc_sr_05_pbe_std_psp8"
 pseudos "Li.psp8, F.psp8"

# Structure
 natom   2
 ntypat  2
 typat   1 2
 znucl   3 9
 xred    0.0  0.0  0.0
         0.5  0.5  0.5

 acell 3*7.675
 rprim 0.0  0.5  0.5
       0.5  0.0  0.5
       0.5  0.5  0.0

#%%<BEGIN TEST_INFO>
#%% [setup]
#%% executable = abinit
#%% exclude_builders = eos_nvhpc_*
#%% test_chain = teph4polaron_1.abi, teph4polaron_2.abi, teph4polaron_3.abi,
#%%              teph4polaron_4.abi, teph4polaron_5.abi, teph4polaron_6.abi,
#%%              teph4polaron_7.abi, teph4polaron_8.abi, teph4polaron_9.abi,
#%%              teph4polaron_10.abi, teph4polaron_11.abi
#%% [files]
#%% use_git_submodule = LiF_eph_varpeq
#%% files_to_test =
#%%   teph4polaron_8.abo, tolnlines = 50, tolabs = 1e-5, tolrel = 1e-3
#%% [paral_info]
#%% max_nprocs = 10
#%% [extra_info]
#%% authors = V. Vasilchenko
#%% keywords = DFPT, EPH, POLARON
#%% description =
#%%   LiF, Fm-3m space group.
#%%   Preparatory run for VarPEq calculations (electron polaron).
#%%   Non-SCF computation of groundstate wavefunction.
#%%<END TEST_INFO>
