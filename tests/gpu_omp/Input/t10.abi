#ABINIT - INPUT FILE
#UO2 54 ATOMS

#Process distribution (parallelism) - TO BE ADAPTED
# autoparal 1
  npkpt 2 npband 4 npfft 4 # 32 MPI processes
# npkpt 2 npband 8 npfft 4 # 64 MPI processes -1
# npkpt 2 npband 4 npfft 8 # 64 MPI processes -2
# npkpt 2 npband 8 npfft 8 # 128 MPI processes 
paral_kgb 1
bandpp 2

#Plane wave basis
ecut 6. 
pawecutdg 10.

#Self-consistent cycle parameters
toldfe 1.d-15
nstep 30
nline 6
diemac 10.

#K-points and symetries
nkpt 1
kpt 0.5 0.5 0.5
kptopt 0
nsym 0
maxnsym 2048
chksymbreak 0

#Electronic configuration
nsppol 2
nband 256
occopt 3
tsmear 0.0005 hartree

#Activation/deactivation of I/O
optforces 2
optstress 1
prtwf 0
prtden 0
prteig 0
timopt 0

#Simulation cell
acell 3*10.27448 
rprim   0.00   1.50   1.50
        1.50   0.00   1.50
        1.00   1.00   0.00
chkprim 0
natom 54
ntypat 2
znucl 92. 8.
typat 1   2   2   1   2   2   1   2   2   1   
      2   2   1   2   2   1   2   2   1   2   
      2   1   2   2   1   2   2   1   2   2   
      1   2   2   1   2   2   1   2   2   1   
      2   2   1   2   2   1   2   2   1   2   
      2   1   2   2

#Atomic positions
xred
              0.00000000000000e+00   0.00000000000000e+00   0.00000000000000e+00
              8.33333333333333e-02   8.33333333333333e-02   1.25000000000000e-01
              2.50000000000000e-01   2.50000000000000e-01   3.75000000000000e-01
              0.00000000000000e+00   0.00000000000000e+00   5.00000000000000e-01
              8.33333333333333e-02   8.33333333333333e-02   6.25000000000000e-01
              2.50000000000000e-01   2.50000000000000e-01   8.75000000000000e-01
              0.00000000000000e+00   3.33333333333333e-01   0.00000000000000e+00
              8.33333333333333e-02   4.16666666666667e-01   1.25000000000000e-01
              2.50000000000000e-01   5.83333333333333e-01   3.75000000000000e-01
              0.00000000000000e+00   3.33333333333333e-01   5.00000000000000e-01
              8.33333333333333e-02   4.16666666666667e-01   6.25000000000000e-01
              2.50000000000000e-01   5.83333333333333e-01   8.75000000000000e-01
              0.00000000000000e+00   6.66666666666667e-01   0.00000000000000e+00
              8.33333333333333e-02   7.50000000000000e-01   1.25000000000000e-01
              2.50000000000000e-01   9.16666666666667e-01   3.75000000000000e-01
              5.55111512312578e-17   6.66666666666667e-01   5.00000000000000e-01
              8.33333333333334e-02   7.50000000000000e-01   6.25000000000000e-01
              2.50000000000000e-01   9.16666666666667e-01   8.75000000000000e-01
              3.33333333333333e-01   0.00000000000000e+00   0.00000000000000e+00
              4.16666666666667e-01   8.33333333333333e-02   1.25000000000000e-01
              5.83333333333333e-01   2.50000000000000e-01   3.75000000000000e-01
              3.33333333333333e-01   0.00000000000000e+00   5.00000000000000e-01
              4.16666666666667e-01   8.33333333333333e-02   6.25000000000000e-01
              5.83333333333333e-01   2.50000000000000e-01   8.75000000000000e-01
              3.33333333333333e-01   3.33333333333333e-01   0.00000000000000e+00
              4.16666666666667e-01   4.16666666666667e-01   1.25000000000000e-01
              5.83333333333333e-01   5.83333333333333e-01   3.75000000000000e-01
              3.33333333333333e-01   3.33333333333333e-01   5.00000000000000e-01
              4.16666666666667e-01   4.16666666666667e-01   6.25000000000000e-01
              5.83333333333333e-01   5.83333333333333e-01   8.75000000000000e-01
              3.33333333333333e-01   6.66666666666667e-01   0.00000000000000e+00
              4.16666666666667e-01   7.50000000000000e-01   1.25000000000000e-01
              5.83333333333333e-01   9.16666666666667e-01   3.75000000000000e-01
              3.33333333333333e-01   6.66666666666667e-01   5.00000000000000e-01
              4.16666666666667e-01   7.50000000000000e-01   6.25000000000000e-01
              5.83333333333333e-01   9.16666666666667e-01   8.75000000000000e-01
              6.66666666666667e-01   0.00000000000000e+00   0.00000000000000e+00
              7.50000000000000e-01   8.33333333333333e-02   1.25000000000000e-01
              9.16666666666667e-01   2.50000000000000e-01   3.75000000000000e-01
              6.66666666666667e-01   5.55111512312578e-17   5.00000000000000e-01
              7.50000000000000e-01   8.33333333333334e-02   6.25000000000000e-01
              9.16666666666667e-01   2.50000000000000e-01   8.75000000000000e-01
              6.66666666666667e-01   3.33333333333333e-01   0.00000000000000e+00
              7.50000000000000e-01   4.16666666666667e-01   1.25000000000000e-01
              9.16666666666667e-01   5.83333333333333e-01   3.75000000000000e-01
              6.66666666666667e-01   3.33333333333333e-01   5.00000000000000e-01
              7.50000000000000e-01   4.16666666666667e-01   6.25000000000000e-01
              9.16666666666667e-01   5.83333333333333e-01   8.75000000000000e-01
              6.66666666666667e-01   6.66666666666667e-01   0.00000000000000e+00
              7.50000000000000e-01   7.50000000000000e-01   1.25000000000000e-01
              9.16666666666667e-01   9.16666666666667e-01   3.75000000000000e-01
              6.66666666666667e-01   6.66666666666667e-01   5.00000000000000e-01
              7.50000000000000e-01   7.50000000000000e-01   6.25000000000000e-01
              9.16666666666667e-01   9.16666666666667e-01   8.75000000000000e-01

#Initial magnetizations
spinat
              0.   0.   2.  0.   0.   0.  0.   0.   0.
              0.   0.   2.  0.   0.   0.  0.   0.   0.
              0.   0.   2.  0.   0.   0.  0.   0.   0.
              0.   0.   2.  0.   0.   0.  0.   0.   0.
              0.   0.   2.  0.   0.   0.  0.   0.   0.
              0.   0.   2.  0.   0.   0.  0.   0.   0.
              0.   0.   2.  0.   0.   0.  0.   0.   0.
              0.   0.   2.  0.   0.   0.  0.   0.   0.
              0.   0.   2.  0.   0.   0.  0.   0.   0.
              0.   0.   2.  0.   0.   0.  0.   0.   0.
              0.   0.   2.  0.   0.   0.  0.   0.   0.
              0.   0.   2.  0.   0.   0.  0.   0.   0.
              0.   0.   2.  0.   0.   0.  0.   0.   0.
              0.   0.   2.  0.   0.   0.  0.   0.   0.
              0.   0.   2.  0.   0.   0.  0.   0.   0.
              0.   0.   2.  0.   0.   0.  0.   0.   0.
              0.   0.   2.  0.   0.   0.  0.   0.   0.
              0.   0.   2.  0.   0.   0.  0.   0.   0.

pp_dirpath "$ABI_PSPDIR"
pseudos "u.hpc.paw, o.hpc.paw"

#%%<BEGIN TEST_INFO>
#%% [setup]
#%% executable = abinit
#%% [paral_info]
#%% nprocs_to_test = 32, 64, 128
#%% max_nprocs = 128
#%% [NCPU_32]
#%% files_to_test = t04_MPI32.out, tolnlines = 280,   tolabs = 1.e-3,      tolrel = 1.0
#%% [NCPU_64]
#%% files_to_test = t04_MPI64.out, tolnlines = 280,   tolabs = 1.e-3,      tolrel = 1.0
#%% [NCPU_128]
#%% files_to_test = t04_MPI128.out, tolnlines = 280,   tolabs = 1.e-3,      tolrel = 1.0
#%% [extra_info]
#%% keywords = PAW,HPC
#%% authors = M. Torrent, M. Sarraute
#%% description = Uranim oxide (UO2) - 54 atoms (GGA) - HPC test
#%%<END TEST_INFO>
